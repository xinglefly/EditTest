# 4.版本升级策略

### 将节点升级到Corda4

### 1.排空节点

`1）使用gracefulShutdown 将当前运行的flow平稳停止，然后关闭节点`

`2）节点耗尽时间取决于应用程序的设计方式，与脱机或相应缓慢的网络对等设备进行通行。设计良好可能只需要几秒钟`

### 2.备份节点目录/数据库

### 3.用corda.jar新版本替换文件

### 4.启动节点

`常规方式启动节点。节点将执行所需的任何自动数据迁移，如果迁移过程中断，可以通过再次启动节点继续进行，不会造成伤害。`

### 5.取消节点（执行任何检查、阅读日志，使用命令：）

`run setFlowsDrainingModeEnabled enabled: false`

